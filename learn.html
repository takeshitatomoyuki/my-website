<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>法律条文暗記ツール</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }

    .question-container {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #ccc;
    }

    .controls {
      margin-bottom: 20px;
    }

    select,
    button {
      margin-right: 10px;
      padding: 5px;
    }

    .blanked {
      cursor: pointer;
      padding: 2px 4px;
      border-radius: 3px;
    }

    .input-container {
      margin-top: 10px;
    }

    .correct {
      color: green;
    }

    .incorrect {
      color: red;
    }
  </style>
</head>

<body>
  <h1>法律条文暗記ツール</h1>

  <div class="controls">
    <label for="major-select">大区分:</label>
    <select id="major-select"></select>

    <label for="minor-select">中区分:</label>
    <select id="minor-select"></select>

    <label for="sub-select">小区分:</label>
    <select id="sub-select"></select>

    <button id="jump-btn">ジャンプ</button>
    <button id="next-btn">次へ</button>
    <button id="prev-btn">前へ</button>

  </div>

  <div class="question-container">
    <p id="question-text"></p>
    <button id="toggle-blank-btn">空欄を表示</button>
  </div>

  <div id="input-area">
    <!-- 入力欄をここに追加 -->
  </div>

  <script>
    // 条文データ構造
    const sentences = [
      {
        id: 1,
        text: "固定資産税の課税客体は、固定資産である。固定資産とは、土地、家屋及び償却資産を総称するものである。",
        category: { major: "1-1課税客体", minor: "1.概要", sub: "1" }
      },
      {
        id: 2,
        text: "土地とは、田、畑、宅地、塩田、鉱泉地、池沼、山林、牧場、原野その他の土地をいう。",
        category: { major: "1-1課税客体", minor: "2.意義", sub: "1.土地" }
      },
      {
        id: 3,
        text: "家屋とは、住家、店舗、工場（発電所及び変電所を含む。）、倉庫その他の建物を言う。",
        category: { major: "1-1課税客体", minor: "2.意義", sub: "2.家屋" }
      },
      {
        id: 4,
        text: "償却資産とは、土地及び家屋以外の事業の用に供することができる資産（鉱業権、漁業権、特許権その他の無形減価償却資産を除く。）でその減価償却額又は減価償却費が法人税法又は所得税法の規定による所得の計算上損金又は必要な経費に算入されるもののうち、少額の減価償却資産又は一括償却資産の規定によりその取得価額の全部又は一部が損金又は必要な経費に算入される資産以外のもの（これに類する資産で法人税又は所得税を課されない者が所有するものを含む。）をいう。ただし、自動車税の種別割の課税客体である自動車並びに軽自動車税の種別割の課税客体である原動機付自転車、軽自動車、小型特殊自動車及び二輪の小型自動車を除くものとする。",
        category: { major: "1-1課税客体", minor: "2.意義", sub: "3.償却資産" }
      },
      {
        id: 5,
        text: "公有水面埋立法の規定により竣功許可前に使用する埋立地若しくは干拓地（以下「埋立地等」という。）又は国が埋立て若しくは干拓により造成する竣功の通知前の埋立地等で工作物を設置し、その他土地を使用する場合と同様の状態で使用されているもの（工事に関して使用されているものを除く。）については、これらの埋立地等をもって土地とみなして、固定資産税を課することができる。",
        category: { major: "1-1課税客体", minor: "3.範囲", sub: "1.土地①公有水面の埋立地等" }
      }
      ,
      {
        id: 6,
        text: "固定資産税の課税客体となる土地とは、田、畑、宅地、山林等の土地それ自体をいうのであって、土地に定着する立木、菜草等は、課税客体に含まれない。",
        category: { major: "1-1課税客体", minor: "3.範囲", sub: "1.土地②立木、菜草" }
      },
      {
        id: 7,
        text: "家屋の附帯設備であって、当該家屋の所有者以外の者がその事業の用に供するため取り付けたものであり、かつ、当該家屋に付合したことにより当該家屋の所有者が所有することになったもの（以下「特定付帯設備」という。）については、当該取り付けた者の事業の用に供することができる資産である場合に限り、当該取り付けた者をもって所有者とみなし、当該特定附帯設備のうち家屋に属する部分は家屋以外の資産とみなして、固定資産税を課することができる。",
        category: { major: "1-1課税客体", minor: "3.範囲", sub: "2.家屋①特定附帯設備" }
      },
      {
        id: 8,
        text: "鶏舎、豚舎、堆肥舎等は構造、規模等の簡易なものが多く、社会通念上家屋と認められないものがほとんどであるため、これらについては原則として課税客体に含まれない。",
        category: { major: "1-1課税客体", minor: "3.範囲", sub: "2.家屋②簡易建築物" }
      },
      {
        id: 9,
        text: "上記2.①と同様",
        category: { major: "1-1課税客体", minor: "3.範囲", sub: "3.償却資産①特定附帯設備" }
      },
      {
        id: 10,
        text: "リース資産にあっては、当該リース資産の所有者が当該リース資産を取得した際における取得価額が、20万円未満のものは課税客体に含まれない。",
        category: { major: "1-1課税客体", minor: "3.範囲", sub: "3.償却資産②リース資産" }
      },
      {
        id: 11,
        text: "固定資産税の課税客体である償却資産とは、事業の用に供することができるものであるとされているため、遊休・未稼働資産も課税客体に含まれる。ただし、いわゆる貯蔵品とみられるものは、棚卸資産に該当するので、課税客体に含まれない。",
        category: { major: "1-1課税客体", minor: "3.範囲", sub: "3.償却資産③遊休・未稼働資産" }
      },
      {
        id: 12,
        text: "固定資産税の課税客体である償却資産とは、減価償却額又は減価償却費が、当該資産の性質上損金又は必要な経費に算入されるべきものであれば足りるものとされているため、すでに減価償却の終わった償却済資産や赤字決算のため減価償却を行っていない資産も課税客体に含まれる。",
        category: { major: "1-1課税客体", minor: "3.範囲", sub: "3.償却資産④償却済資産" }
      },
      {
        id: 13,
        text: "牛、馬、果樹その他の生物は、これらの資産の性質にかんがみ、課税客体に含まれない。",
        category: { major: "1-1課税客体", minor: "3.範囲", sub: "3.償却資産⑤生物" }
      },
      {
        id: 14,
        text: "簿外資産も事業の用に供し得るものについては、課税客体に含まれる。",
        category: { major: "1-1課税客体", minor: "3.範囲", sub: "3.償却資産⑥簿外資産" }
      },
      {
        id: 15,
        text: "建設中仮勘定において経理されているものであっても、その一部が賦課期日までに完成し、事業の用に供されているものは、課税客体に含まれる",
        category: { major: "1-1課税客体", minor: "3.範囲", sub: "3.償却資産⑦建設中仮勘定" }
      },
      {
        id: 16,
        text: "固定資産税においては、賦課期日の現況により課税要件が確定することとされている。したがって、当該年度の賦課期日において、固定資産として現実に所在するものが課税客体となる。",
        category: { major: "1-1課税客体", minor: "3.範囲", sub: "4.賦課期日との関係" }
      },
      {
        id: 17,
        text: "固定資産税は固定資産に対し、当該固定資産所在の市町村において課する。したがって、原則として、固定資産の所在市町村が課税団体となる。",
        category: { major: "1-2課税団体", minor: "1.原則", sub: "1" }
      },
      {
        id: 18,
        text: "東京都の特別区の存する区域については、都が固定資産税を課する。",
        category: { major: "1-2課税団体", minor: "2.都の特別区", sub: "1" }
      },
      {
        id: 19,
        text: "公有水面埋立法の規定により竣功認可前に使用する埋立地若しくは干拓地（以下「埋立地等」という。）又は国が埋立て若しくは干拓により造成する竣功の通知前の埋立地等で工作物を設置し、その他土地を使用する場合と同様の状態で使用されているもの（工事に関して使用されているものを除く。）のうち、土地とみなされ固定資産税が課税される埋立地等については、当該埋立地等が隣接する土地の所在する市町村をもって、当該埋立地等が所在する市町村とみなす。したがって、埋立地等が隣接する土地の所在市町村が課税団体となる。",
        category: { major: "1-2課税団体", minor: "3.公有水面の埋立地等", sub: "1" }
      },
      {
        id: 20,
        text: "償却資産のうち船舶、車両その他これらに類する物件については、下記5.の適用がある場合を除き、その主たる定けい場又は定置場所在の市町村を当該固定資産所在の市町村とし、船舶についてその主たる定けい場が不明である場合には、定けい場所在の市町村で船籍港があるものを主たる定けい場所在の市町村とみなす。したがって、その主たる定けい場又は定置場所在の市町村が課税団体となる。",
        category: { major: "1-2課税団体", minor: "4.移動性償却資産又は可動性償却資産", sub: "1" }
      },
      {
        id: 21,
        text: "次に掲げる固定資産については、道府県知事又は総務大臣が評価を行った後、その固定資産が所在するものとされる市町村及びその価格等を決定し、当該市町村にその決定した価格等を配分することとされており、その価格等の配分を受けた市町村が課税団体となる。＊1_総務省令で定める船舶、車両その他の移動性償却資産又は可動性償却資産で二以上の市町村にわたって使用されるもののうち総務大臣が指定するもの。2_鉄道、軌道、発電、送電、配電若しくは電気通信のように供する固定資産又は二以上の市町村にわたって所在する固定資産で、その全体を一の固定資産として評価しなければ適正な評価ができないと認められるもののうち総務大臣が指定するもの。",
        category: { major: "1-2課税団体", minor: "5.総務大臣指定資産", sub: "1" }
      },
      {
        id: 22,
        text: "大規模の償却資産については、市町村は、課税定額までを課税標準として固定資産税を課する。また、市町村の課税定額を超える部分については、当該市町村を包括する道府県の普通税として固定資産税を課する。したがって、大規模の償却資産については、その市町村が課税団体になるほか、それを包括する道府県も課税団体となる。なお、大規模の償却資産に対する市町村の課税制限は、東京都の特別区及び地方自治法に規定する指定都市については適用されない。＊大規模の償却資産とは、一の納税義務者が所有する償却資産で、その価額の合計額が市町村の人口段階に応じて法定されている金額を超えるものをいう。",
        category: { major: "1-2課税団体", minor: "6.大規模の償却資産", sub: "1" }
      },
      {
        id: 23,
        text: "固定資産税においては、賦課期日の現況により課税要件が確定することとされている。したがって、当該年度の賦課期日において、固定資産が所在している市町村が課税団体となる。＊固定資産税の賦課期日は、当該年度の初日の属する年の1月1日とする。",
        category: { major: "1-2課税団体", minor: "7.賦課期日との関係", sub: "1" }
      },
      {
        id: 24,
        text: "固定資産税は、固定資産の所有者に課する。すなわち、固定資産税の納税義務者は所有者である。",
        category: { major: "1-3納税義務者", minor: "1.原則", sub: "1.内容" }
      },
      {
        id: 25,
        text: "ｲ_土地又は家屋の所有者は、登記簿又は土地補充課税台帳若しくは家屋補充課税台帳に所有者（区分所有に係る家屋については、区分所有者とする。）として登記又は登録されている者をいう。ﾛ_上記ｲ_の場合において、所有者として登記又は登録がされている個人が賦課期日前に死亡しているとき、若しくは所有者として登記又は登録されている法人が同日前に消滅しているとき、又は所有者として登記されている国、都道府県、市町村等の固定資産税の非課税団体が同日前に所有者でなくなっているときは、賦課期日において当該土地又は家屋を現に所有している者をいう。",
        category: { major: "1-3納税義務者", minor: "1.原則", sub: "2.所有者①土地又は家屋" }
      },
      {
        id: 26,
        text: "償却資産の所有者は、償却資産課税台帳に所有者として登録されている者という。",
        category: { major: "1-3納税義務者", minor: "1.原則", sub: "2.所有者②償却資産" }
      },
      {
        id: 27,
        text: "質権又は百年より長い存続期間の定めのある地上権の目的である土地については、その質権者又は地上権者が納税義務者となる。",
        category: { major: "1-3納税義務者", minor: "2.質権者又は地上権者", sub: "1" }
      },
      {
        id: 28,
        text: "市町村は、固定資産の所有者の所在が震災、風水害、火災その他の事由により不明である場合には、その使用者を所有者とみなして、固定資産課税台帳に登録し、その者に固定資産税を課することができる。②市町村は、相当の努力が払われたと認められるものとして政令で定める方法により探索を行ってもなお固定資産の所有者の存在が不明である場合（上記①の場合を除く。）には、その使用者を所有者とみなして、固定資産課税台帳に登録し、その者に固定資産税を課することができる。③上記①、②の場合において、当該市町村は、当該登録をしようとするときは、あらかじめ、その旨を当該使用者に通知しなければならない。",
        category: { major: "1-3納税義務者", minor: "3.みなす所有者", sub: "1.所有者が不明の固定資産①" }
      },
      {
        id: 29,
        text: "農地法の規定により農林水産大臣が管理する土地又は相続税法の規定により国が収納した農地については、次に掲げる期間に応じ、それぞれに定める者を使用者とみなす。①買収し、又は収納した日から国が当該土地又は農地を他人に売り渡し、その所有権が売渡しの相手方に移転する日までの間→その使用者②その日後当該売渡しの相手方が登記簿に所有者として登記される日までの間→その売渡しの相手方",
        category: { major: "1-3納税義務者", minor: "3.みなす所有者", sub: "2.国が買収し、又は収納した農地等" }
      },
      {
        id: 30,
        text: "農土地区画整理法による土地区画整理事業又は土地改良法による土地改良事業の施行に係る土地については、仮換地等の指定があった場合、又は仮使用地がある場合には、次に掲げる期間に応じ、それぞれに定める者を所有者とみなすことができる。①当該仮換地等又は仮使用地について使用し、又は収益することができるようになった日から換地処分の公告がある日又は換地計画の認可の公告がある日までの間→ｲ_仮換地等にあっては当該仮換地等に対応する従前の土地について登記簿又は土地補充課税台帳に所有者として登記又は登録がされている者ﾛ_仮使用地にあっては土地区画整理法により土地区画整理事業の施行者以外の仮使用地の使用者②換地処分の公告があった日又は換地計画の認可の公告があった日から換地又は保留地を取得した者が登記簿に当該換地又は保留地に係る所有者として登記される日までの間→当該換地又は保留地を取得した者",
        category: { major: "1-3納税義務者", minor: "3.みなす所有者", sub: "3.土地区画整理事業等の施行に係る土地" }
      },
      {
        id: 31,
        text: "公有水面埋立法の規定により竣功許可前に使用する埋立地若しくは干拓地（以下「埋立地等」という。）又は国が埋立て若しくは干拓により造成する竣功の通知前の埋立地等で工作物を設置し、その他土地を使用する場合と同様の状態で使用されているもの（工事に関して使用されているものを除く。）のうち、土地とみなされ固定資産税が課税される埋立地等については、次に掲げる場合に応じ、それぞれに定める者を所有者とみなす。①都道府県等以外の者が公有水面埋立法の規定により使用する埋立地等の場合→当該埋立地等の使用者②都道府県等が公有水面埋立法の規定により使用し、又は国が埋立て若しくは干拓により造成する埋立地等の場合→都道府県等又は国が当該埋立地等を都道府県等又は国以外の者に使用させている場合に限り、当該埋立地等の使用者",
        category: { major: "1-3納税義務者", minor: "3.みなす所有者", sub: "4.公有水面の埋立地等" }
      },
      {
        id: 32,
        text: "信託会社が信託の引受けをした償却資産で、その信託行為の定めるところにしたがい当該信託会社が他の者にこれを譲渡することを条件として当該他の者に賃貸しているものについては、当該償却資産が当該他の者の事業の用に供するものであるときは、当該他の者をもって所有者とみなす。",
        category: { major: "1-3納税義務者", minor: "3.みなす所有者", sub: "5.信託償却資産" }
      },
      {
        id: 33,
        text: "家屋の附帯設備であって、当該家屋の所有者以外の者がその事業の用に供するため取り付けたものであり、かつ、当該家屋に付合したことにより当該家屋の所有者が所有することになったもの（以下「特定付帯設備」という。）については、当該取り付けた者の事業の用に供することができる資産である場合に限り、当該取り付けた者をもって所有者とみなし、当該特定附帯設備のうち家屋に属する部分は家屋以外の資産とみなして、固定資産税を課することができる。　",
        category: { major: "1-3納税義務者", minor: "3.みなす所有者", sub: "6.特定附帯設備" }
      },
      {
        id: 34,
        text: "共有物に対する固定資産税については、その共有者が連帯して納付する義務を追う。",
        category: { major: "1-3納税義務者", minor: "4.その他の特例", sub: "1.共有物" }
      },
      {
        id: 35,
        text: "償却資産に係る売買があった場合において売主が当該償却資産の所有権を留保しているときは、固定資産税の賦課徴収については、当該償却資産は、売主及び買主の共有物とみなし、売主及び買主が連帯して納付する義務を負う。ただし、社会の納税意識に合致するよう原則として買主に対して課税するものとする。",
        category: { major: "1-3納税義務者", minor: "4.その他の特例", sub: "2.所有権留保付売買に係る償却資産" }
      },
      {
        id: 36,
        text: "区分所有家屋に対して課する固定資産税については、区分所有法に規定する区分所有者は、共有物の連帯納税義務の規定にかかわらず、当該区分所有家屋に係る固定資産税を専有部分の床面積の割合により按分した額を納付する義務を負う。",
        category: { major: "1-3納税義務者", minor: "4.その他の特例", sub: "3.区分所有家屋の特例" }
      },
      {
        id: 37,
        text: "区分所有家屋の敷地の用に供されている土地（以下「共用土地」という。）で、一定の要件を満たすものに対して課する固定資産税については、共用土地納税義務者は、共有物の連帯納税義務の規定にかかわらず、当該共用土地に係る固定資産税額を各共用土地納税義務者の当該共用土地に係る持分の割合により按分した額を納付する義務を負う。",
        category: { major: "1-3納税義務者", minor: "4.その他の特例", sub: "4.区分所有家屋の敷地の特例" }
      },
      {
        id: 38,
        text: "固定資産税においては、賦課期日の現況により課税要件が確定することとされている。したがって、当該年度の賦課期日において、固定資産の所有者とされる者が納税義務者となる。＊固定資産税の賦課期日は、当該年度の初日の属する年の１月１日とする。＜参考＞相続による納税義務の承継1_相続があった場合には、その相続人は、被相続人の地方団体の徴収金を納付しなければならない。2_相続人が２人以上あるときは、各相続人は、被相続人の地方団体の徴収金を民法の規定によるその相続分によりあん分して計算した額を納付しなければならない。",
        category: { major: "1-3納税義務者", minor: "4.その他の特例", sub: "5.賦課期日との関係" }
      },
      {
        id: 39,
        text: "固定資産税の課税標準は、固定資産税課税台帳に登録された固定資産の価格である。＊価格とは適正な時価をいう。",
        category: { major: "1-4土地又は家屋の課税標準", minor: "1.概要", sub: "1" }
      },
      {
        id: 40,
        text: "基準年度に係る賦課期日に所在する土地又は家屋に対して課する基準年度の固定資産税の課税標準は、当該土地又は家屋の基準年度に係る賦課期日における価格で土地課税台帳等又は家屋課税台帳等に登録されたものとする。",
        category: { major: "1-4土地又は家屋の課税標準", minor: "2.課税標準", sub: "1_基準年度の土地又は家屋①基準年度" }
      },
      {
        id: 41,
        text: "基準年度の土地又は家屋に対して課する第二年度の固定資産税の課税標準は、当該土地又は家屋に係る基準年度の固定資産税の課税標準の基礎となった価格で土地課税台帳等又は家屋課税台帳等に登録されたものとする。ただし、特定の事情がある場合、市町村長が適切と認めた場合には比準価格で登録されるものとする。",
        category: { major: "1-4土地又は家屋の課税標準", minor: "2.課税標準", sub: "1_基準年度の土地又は家屋②第ニ年度" }
      },
      {
        id: 42,
        text: "基準年度の土地又は家屋に対して課する第三年度の固定資産税の課税標準は、基準年度の課税標準の基礎となった価格で土地課税台帳等又は家屋課税台帳等に登録されたものとする。ただし、特定の事情がある場合は比準価格で登録されることがある。",
        category: { major: "1-4土地又は家屋の課税標準", minor: "2.課税標準", sub: "1_基準年度の土地又は家屋③第三年度" }
      },
      {
        id: 43,
        text: "第二年度において新たに固定資産税を課することとなる土地又は家屋に対して課する第二年度の固定資産税の課税標準は、類似する土地又は家屋の基準年度の価格に比準する価格で登録されたものとする。",
        category: { major: "1-4土地又は家屋の課税標準", minor: "2.課税標準", sub: "2_第二年度の土地又は家屋①第ニ年度" }
      },
      {
        id: 44,
        text: "第二年度の土地又は家屋に対して課する第三年度の固定資産税の課税標準は、第二年度の課税標準の基礎となった価格で登録されたものとする。ただし、特定の事情がある場合は比準価格で登録されることがある。",
        category: { major: "1-4土地又は家屋の課税標準", minor: "2.課税標準", sub: "2_第二年度の土地又は家屋②第三年度" }
      },
      {
        id: 45,
        text: "第三年度において新たに固定資産税を課することとなる土地又は家屋に対して課する固定資産税の課税標準は、類似する土地又は家屋の基準年度の価格に比準する価格で登録されたものとする。",
        category: { major: "1-4土地又は家屋の課税標準", minor: "2.課税標準", sub: "3_第三年度の土地又は家屋" }
      },
      {
        id: 46,
        text: "修正基準が適用される場合、地価が下落し、課税標準が均衡を失うと認められる土地については、修正価格に基づき課税標準が登録される。",
        category: { major: "1-4土地又は家屋の課税標準", minor: "2.課税標準", sub: "4_修正基準の適用を受ける土地" }
      },
      {
        id: 47,
        text: "住宅用地とは、次に掲げる土地の区分に応じ、それぞれに定める土地とする。①別荘部分を有しない専用住宅の敷地の用に供されている土地については、当該土地（当該土地の面積が当該家屋の床面積の１０倍の面積を超える場合には、当該１０倍の面積に相当する土地とする。）②一部居住用家屋又は別荘部分を有する専用住宅の敷地の用に供されている土地については、次の表に掲げる家屋及び居住部分の割合の区分に応じ、それぞれの率を当該土地の面積（当該面積が当該家屋の床面積の１０倍の面積を超える場合には、当該１０倍の面積とする。）を乗じて得た面積に相当する土地　　　　　　　　　　　　　　　　　　　　　　　2_小規模住宅用地小規模住宅用地とは、次に掲げる区分に応じ、それぞれに定める住宅用地とする。①住宅用地でその面積が２００㎡以下であるものについては、当該住宅用地②住宅用地でその面積が２００㎡を超えるものについては、当該住宅用地の面積を住居（その全部が別荘のように供される住居以外の住居）の数で除して得た面積が２００㎡以下であるものにあっては当該住宅用地、当該除して得た面積が２００㎡を超えるものにあっては２００㎡に当該住居の数を乗じて得た面積に相当する住宅用地",
        category: { major: "1-4土地又は家屋の課税標準", minor: "3.住宅用地に対する特例", sub: "1" }
      },
      {
        id: 48,
        text: "課税標準の特例の適用を受ける家屋については、価格に特例率を乗じて得た額が課税標準となる。",
        category: { major: "1-4 土地又は家屋の課税標準", minor: "4.家屋に対する特例", sub: "1" }
      },
      {
        id: 49,
        text: "固定資産税においては、賦課期日の現況により課税要件が確定することとされている。したがって、当該年度の賦課期日における価格が課税標準となる。（＊固定資産税の賦課期日は、当該年度の初日の属する年の1月1日とする。）",
        category: { major: "1-4 土地又は家屋の課税標準", minor: "5.賦課期日との関係", sub: "1" }
      },
      {
        id: 50,
        text: "固定資産税の課税標準は、固定資産税課税台帳に登録された固定資産の価格である。（＊価格とは適正な時価をいう。）",
        category: { major: "1-5 償却資産の課税標準", minor: "1.概要", sub: "1" }
      },
      {
        id: 51,
        text: "償却資産に対して課する固定資産税の課税標準は、賦課期日における当該償却資産の価格で償却資産課税台帳に登録されたものとする。",
        category: { major: "1-5 償却資産の課税標準", minor: "2.課税標準", sub: "1" }
      },
      {
        id: 52,
        text: "外航船舶又は準外航船舶に対して課する固定資産税の課税標準は、外航船舶にあっては当該価格の６分の１の額とし、準外航船舶にあっては当該価格の４分の１の額とする。（＊外航船舶とは、主として遠洋区域を航行区域とする船舶で一定のものをいう。＊準外航船舶とは、外航船舶以外の船舶のうち主として遠洋区域を航行区域とする船舶で外航船舶に準ずる一定のものをいう。）",
        category: { major: "1-5 償却資産の課税標準", minor: "3.船舶に対する特例", sub: "1_外航船舶・準外航船舶" }
      },
      {
        id: 53,
        text: "①内航船舶（専ら遊覧の用に供する船舶その他一定のものを除く。）に対して課する固定資産税の課税標準は、当該価格の２分の１の額とする。②内航船舶のうち、専ら離島航路事業の用に供するものに対して課する固定資産税の課税標準は、当該価格の２分の１の額に３分の１を乗じて得た額とする。（＊内航船舶とは、外航船舶及び準外航船舶以外の船舶をいう。）",
        category: { major: "1-5 償却資産の課税標準", minor: "3.船舶に対する特例", sub: "2_内航船舶" }
      },
      {
        id: 54,
        text: "課税標準の特例の適用を受ける家屋については、価格に特例率を乗じて得た額が課税標準となる。",
        category: { major: "1-4 土地又は家屋の課税標準", minor: "4.家屋に対する特例", sub: "1" }
      },
      {
        id: 55,
        text: "固定資産税においては、賦課期日の現況により課税要件が確定することとされている。したがって、当該年度の賦課期日における価格が課税標準となる。（＊固定資産税の賦課期日は、当該年度の初日の属する年の1月1日とする。）",
        category: { major: "1-4 土地又は家屋の課税標準", minor: "5.賦課期日との関係", sub: "1" }
      },
      {
        id: 56,
        text: "固定資産税の課税標準は、固定資産税課税台帳に登録された固定資産の価格である。（＊価格とは適正な時価をいう。）",
        category: { major: "1-5 償却資産の課税標準", minor: "1.概要", sub: "1" }
      },
      {
        id: 57,
        text: "償却資産に対して課する固定資産税の課税標準は、賦課期日における当該償却資産の価格で償却資産課税台帳に登録されたものとする。",
        category: { major: "1-5 償却資産の課税標準", minor: "2.課税標準", sub: "1" }
      },
      {
        id: 58,
        text: "外航船舶又は準外航船舶に対して課する固定資産税の課税標準は、外航船舶にあっては当該価格の６分の１の額とし、準外航船舶にあっては当該価格の４分の１の額とする。（＊外航船舶とは、主として遠洋区域を航行区域とする船舶で一定のものをいう。＊準外航船舶とは、外航船舶以外の船舶のうち主として遠洋区域を航行区域とする船舶で外航船舶に準ずる一定のものをいう。）",
        category: { major: "1-5 償却資産の課税標準", minor: "3.船舶に対する特例", sub: "1_外航船舶・準外航船舶" }
      },
      {
        id: 59,
        text: "①内航船舶（専ら遊覧の用に供する船舶その他一定のものを除く。）に対して課する固定資産税の課税標準は、当該価格の２分の１の額とする。②内航船舶のうち、専ら離島航路事業の用に供するものに対して課する固定資産税の課税標準は、当該価格の２分の１の額に３分の１を乗じて得た額とする。（＊内航船舶とは、外航船舶及び準外航船舶以外の船舶をいう。）",
        category: { major: "1-5 償却資産の課税標準", minor: "3.船舶に対する特例", sub: "2_内航船舶" }
      },
      {
        id: 60,
        text: "国際航空機に対して課する固定資産税の課税標準は、当該価格の５分の１の額（国際航空機のうち、国際路線専用機として総務省令で定めるものにあっては２分の１を、国際路線専用機に準ずるものとして総務省令で定めるものにあっては、３分の２を当該額に乗じて得た額）とする。（＊国際航空機とは、国際路線に就航する航空機で航空法の規定により免許を受けた者が運航するもののうち総務省令で定めるものをいう。）",
        category: { major: "1-5 償却資産の課税標準", minor: "4.航空機に対する特例", sub: "1_国際航空機" }
      },
      {
        id: 61,
        text: "主として離島路線に就航する航空機で一定のものに対して課する固定資産税の課税標準は、当該航空機に対して課する固定資産税が課されることとなった年度から３年度分の固定資産税については当該価格の３分の１の額とし、その後３年度分の固定資産税については当該価格の３分の２の額とする。ただし、当該航空機のうち、特に地域的な航空運送の用に供する小型の航空機に対して課する固定資産税の課税標準は、当該価格の４分の１の額とする。",
        category: { major: "1-5 償却資産の課税標準", minor: "4.航空機に対する特例", sub: "2_離島路線就航航空機" }
      },
      {
        id: 62,
        text: "大規模の償却資産については、市町村は、課税定額までを課税標準として固定資産税を課する。また、市町村の課税定額を超える部分の金額については、当該市町村を包括する道府県の普通税として固定資産税に課する。（＊大規模の償却資産とは、一の納税義務者が所有する償却資産で、その価額の合計額が市町村の人口段階に応じて法定されている金額を超えるものをいう。）",
        category: { major: "1-5 償却資産の課税標準", minor: "5.大規模の償却資産に対する特例", sub: "1" }
      },
      {
        id: 63,
        text: "固定資産税においては、賦課期日の現況により課税要件が確定することとされている。したがって、当該年度の賦課期日における価格が課税標準となる。（＊固定資産税の賦課期日は、当該年度の初日の属する年の1月1日とする。）",
        category: { major: "1-5 償却資産の課税標準", minor: "6.賦課期日との関係", sub: "1" }
      },
      {
        id: 64,
        text: "固定資産税の非課税の範囲については、その根拠を固定資産の所有者の性格に求めているものと、固定資産それ自体の用途及び性格に求めているものとに区別される。前者を人的非課税といい、後者を物的非課税という。",
        category: { major: "2-1 非課税", minor: "0.概要", sub: "1" }
      }, {
        id: 65,
        text: "市町村は、国並びに都道府県、市町村、特別区、これらの組合、財産区及び合併特例区に対しては固定資産税を課することができない。",
        category: { major: "2-1 非課税", minor: "1.人的非課税", sub: "1" }
      },
      {
        id: 66,
        text: "固定資産税は次に掲げる固定資産税に対しては課することができない。①国並びに都道府県、市町村、特別区、これらの組合及び財産区が公用又は公共の用に供する固定資産。②独立行政法人水資源機構等が直接その本来の事業の用に供する一定の固定資産。③宗教法人が専らその本来の用に供する宗教法人法に規定する境内建物及び境内地。④墓地。⑤公共の用に供する道路、運河用地及び水道用地。⑥保安林に係る土地（一定のものを除く。）⑦文化財保護法の規定により、国宝、重要文化財等として指定された家屋又はその敷地。⑧その他一定のもの",
        category: { major: "2-1 非課税", minor: "2.物的非課税", sub: "1" }
      },
      {
        id: 67,
        text: "固定資産を有料で借り受けた者がこれを上記2.に掲げる非課税資産として使用する場合には、当該固定資産の所有者に固定資産税を課することができる。",
        category: { major: "2-1 非課税", minor: "3.物的非課税が課税される場合", sub: "1_有料借受けの場合の課税" }
      },
      {
        id: 68,
        text: "市町村は、上記2.に掲げる非課税資産を当該目的以外の目的に使用する場合には、これらの固定資産に対し、固定資産税を課する。",
        category: { major: "2-1 非課税", minor: "3.物的非課税が課税される場合", sub: "2_目的外使用の場合の課税" }
      },
      {
        id: 69,
        text: "市町村は、健康保険組合等が所有しかつ使用する事務所及び倉庫（一定の事業に使用する部分を除く。）に対しては、固定資産税を課することができない。",
        category: { major: "2-1 非課税", minor: "4.健康保険組合等が所有しかつ使用する事務所等", sub: "1" }
      },
      {
        id: 70,
        text: "市町村長は、非課税の規定の適用を受けた固定資産で当該年度において新たに固定資産税を課することとなるものがある場合には、一般の固定資産の価格等の登録後遅滞なく、その旨を当該固定資産に対して課する固定資産税の納税義務者に通知するように努めなければならない。＜参考＞1_課税免除 地方団体は公益上その他の事由により課税を不適当とする場合には、課税しないことができる。2_減免 市町村長は、天災その他特別の事情がある場合において固定資産税の減免を必要とすると認める者、貧困により生活のため公私の扶助を受ける者その他特別の事情がある者に限り、当該市町村の条例の定めるところにより、固定資産税を減免することができる。3_消滅時効①地方税の徴収権は、法定納期限の翌日から起算して５年間行使しないことにより時効により消滅する。②偽りその他不正行為による場合には、上記①の期限は７年となる。",
        category: { major: "2-1 非課税", minor: "5.納税義務者への通知", sub: "1" }
      },
      {
        id: 71,
        text: "免税点の制度は、零細な課税客体を排除することで、税負担を軽減し、徴税の合理化を図るために設けられたものである。",
        category: { major: "2-2 免税点", minor: "1.趣旨", sub: "1" }
      },
      {
        id: 72,
        text: "市町村は、同一の者について当該市町村の区域内におけるその者の所有に係る土地、家屋又は償却資産に対して課する固定資産税の課税標準となるべき額が、土地にあっては３０万円、家屋にあっては２０万円、償却資産にあっては１５０万円に満たない場合には、固定資産税を課することができない。ただし、財政上その他特別の必要がある場合には、当該市町村の条例の定めるところにより、その額がそれぞれ３０万円、２０万円又は１５０万円に満たないときであっても、固定資産税を課することができる。",
        category: { major: "2-2 免税点", minor: "2.内容", sub: "1" }
      },
      {
        id: 73,
        text: "①課税標準の特例の適用を受けるものについては、その特例適用後の額により免税点の判定を行う。②土地で負担調整措置の適用があるものについては、現実の課税標準となるべき額により免税点の判定を行う。",
        category: { major: "2-2 免税点", minor: "3.判定", sub: "1" }
      },
      {
        id: 74,
        text: "同一の者が市町村内に複数の土地又は複数の家屋を所有している場合には、固定資産課税台帳に基づいて所有者ごとに作成された土地名寄帳又は家屋名寄帳に基づき、免税点の判定をすることとなる。",
        category: { major: "2-2 免税点", minor: "4.複数所有する場合の判定", sub: "1.土地又は家屋" }
      },
      {
        id: 75,
        text: "同一の者が市町村内に複数の償却資産を所有している場合には、償却資産に係る申告書に基づいて所有者ごとに作成された償却資産課税台帳に基づき、免税点の判定をすることとなる。",
        category: { major: "2-2 免税点", minor: "4.複数所有する場合の判定", sub: "2.償却資産" }
      },
      {
        id: 76,
        text: "都の特別区及び地方自治法に規定する指定都市の区の区域は、一の市の区域とみなし、これらの区の区域に所在する課税客体ごとに免税点の判定を行う。",
        category: { major: "2-2 免税点", minor: "5.都の特別区等の判定", sub: "1" }
      },
      {
        id: 77,
        text: "①共有に係る固定資産については、それぞれの共有者が他に固定資産を所有している場合であっても、その資産とは別個に、共有されている固定資産を別の人格が所有しているものとして免税点の判定を行う。②区分所有家屋及び区分所有家屋の敷地については、区分所有者ごとでなく、全体の課税標準となるべき額で免税点の判定を行う。",
        category: { major: "2-2 免税点", minor: "6.共有等に係る固定資産の判定", sub: "1" }
      },
      {
        "id": 78,
        "text": "固定資産税の納期は、４月、７月、１２月及び２月中において、当該市町村の条例で定める。ただし、特別の事情がある場合には、これと異なる納期を定めることができる。",
        "category": { "major": "3-1納期", "minor": "1.市町村", "sub": "1_原則" }
      },
      {
        "id": 79,
        "text": "①固定資産税額（都市計画税を合わせて徴収する場合には、固定資産税額と都市計画税額との合算額とする。）が市町村の条例で定める金額以下であるものについては、当該市町村は、上記1_により定められた納期のうちいずれか一の納期においては、その全額を徴収することができる。",
        "category": { "major": "3-1納期", "minor": "1.市町村", "sub": "2_例外①" }
      },
      {
        "id": 80,
        "text": "②地方団体の長は、災害その他やむを得ない理由により、上記1_の納期限までにその納付ができないと認められるときは、当該地方団体の条例の定めるところにより、納期限を延長することができる。",
        "category": { "major": "3-1納期", "minor": "1.市町村", "sub": "2_例外②" }
      },
      {
        "id": 81,
        "text": "大規模の償却資産について、道府県が課する固定資産税の納期については、上記1.の規定中「市町村」とあるのは「道府県」と、「市町村長」とあるのは「道府県知事」と読み替えて準用する（ただし、上記1.2_①）のカッコ書きの規定は除く。",
        "category": { "major": "3-1納期", "minor": "2.道府県", "sub": "" }
      },
      {
        "id": 82,
        "text": "固定資産税の徴収については、普通徴収の方法によらなければならない。普通徴収とは、徴税吏員が納税通知書を当該納税者に交付することにより地方税を徴収することをいう。",
        "category": { "major": "3-2徴収の方法", "minor": "1.市町村", "sub": "1_徴収の方法" }
      },
      {
        "id": 83,
        "text": "納税通知書とは、納税者が納付すべき地方税について、次の事項を記載した文書で、当該地方団体が作成するものをいう。\n㋑その賦課の根拠となった法律及び当該地方団体の条例の規定\n㋺納税者の住所及び氏名\n㋩課税標準\n㋥税率\n㋭税率\n㋬納期\n㋣各納期における納付額\n㋠納付の場所\n㋷滞納した場合において執られるべき措置\n㋦賦課に不服がある場合における救済の方法",
        "category": { "major": "3-2徴収の方法", "minor": "1.市町村", "sub": "1_徴収の方法" }
      },
      {
        "id": 84,
        "text": "納税通知書に記載すべき課税標準額は、土地、家屋及び償却資産の価額並びにこれらの合計額とする。",
        "category": { "major": "3-2徴収の方法", "minor": "1.市町村", "sub": "1_徴収の方法" }
      },
      {
        "id": 85,
        "text": "市町村は、土地又は家屋に対して課する固定資産税を徴収しようとする場合には、総務省令で定めるところにより、次の区分に応じ次に定める事項を記載しら文書（「課税明細書」という。）を当該納税者に交付しなければならない。",
        "category": { "major": "3-2徴収の方法", "minor": "1.市町村", "sub": "1_徴収の方法" }
      },
      {
        "id": 86,
        "text": "仮徴収の趣旨：納税通知書の納付期限までに当該年度分の価格等の配分が行われない固定資産について、第一期納期からの税収入の確保及び通常の固定資産との課税の公平を目的として仮徴収の制度が認められている。",
        "category": { "major": "3-2徴収の方法", "minor": "1.市町村", "sub": "2_仮徴収" }
      },
      {
        "id": 87,
        "text": "仮徴収の方法：市町村は、地方税法第389条第1項各号に掲げる固定資産（船舶を除く。）に対して課する固定資産税について、前年度の固定資産税の課税標準である価格を課税標準として仮に算定した額（仮算定税額）を基に徴収する。ただし、徴収する額の総額は仮算定税額の2分の1に相当する額を超えることができない。",
        "category": { "major": "3-2徴収の方法", "minor": "1.市町村", "sub": "2_仮徴収" }
      },
      {
        "id": 88,
        "text": "大規模の償却資産について、道府県が課する固定資産税の徴収の方法については、上記1.の規定中「市町村」とあるのは「道府県」と、「市町村長」とあるのは「道府県知事」と読み替えて準用する（ただし、上記1.1_③の規定は除く）。",
        "category": { "major": "3-2徴収の方法", "minor": "2.道府県", "sub": "" }
      },

      {
        "id": 89,
        "text": "償却資産については、土地及び家屋と異なり登記制度が存在しないため、課税客体等の把握を目的として申告義務が課されている。",
        "category": { "major": "4-1申告制度", "minor": "1.償却資産の申告", "sub": "1.趣旨" }
      },
      {
        "id": 90,
        "text": "固定資産税の納税義務がある償却資産の所有者（下記②又は③の固定資産の所有者を除く。）は、総務省令で定めるところにより、毎年１月１日現在における当該償却資産について、次の事項を１月３１日までに当該償却資産の所在地の市町村長に申告しなければならない。ｲ_所在。ﾛ_種類。ﾊ_数量。ﾆ_取得時期。ﾎ_取得価額。ﾍ_耐用年数。ﾄ_見積価額。ﾁ_その他償却資産課税台帳の登録及び当該償却資産の価格の決定に必要な事項。",
        "category": { "major": "4-1申告制度", "minor": "1.償却資産の申告", "sub": "2.内容①一般の償却資産" }
      },
      {
        "id": 91,
        "text": "地方税法第３８９条第１項各号に掲げる固定資産の所有者で固定資産税の納税義務がある者は、総務省令で定めるところにより、毎年１月１日現在における当該固定資産について、次の事項を１月３１日までに道府県知事又は総務大臣に申告しなければならない。ｲ_固定資産課税台帳に登録されるべき事項及びこれに記載（記録）をされている事項。ﾛ_その他固定資産の評価に必要な事項。",
        "category": { "major": "4-1申告制度", "minor": "1.償却資産の申告", "sub": "2.内容②総務大臣指定資産" }
      },
      {
        "id": 92,
        "text": "大規模の償却資産に係る申告については、上記①の規定中「市町村長」とあるのは「道府県知事」と読み替えて準用する。",
        "category": { "major": "4-1申告制度", "minor": "1.償却資産の申告", "sub": "2.内容③大規模の償却資産" }
      },
      {
        "id": 93,
        "text": "納税義務者が、納税義務を負う市町村内に住所、居所、事務所等を有しない場合において、徴税の確保を図ることを目的として申告義務が課されている。",
        "category": { "major": "4-1申告制度", "minor": "2.納税管理人の申告", "sub": "1.趣旨" }
      },
      {
        "id": 94,
        "text": "固定資産税の納税義務者は、納税義務を負う市町村内に住所等を有しない場合には、納税に関する一切の事務の処理させるため、当該市町村の条例で定める地域内に住所等を有する者のうちから納税管理人を定めてこれを市町村長に申告し、又は当該地域外に住所等を有する者のうち当該事項の処理につき便宜を有するものを納税管理人として定めることについて市町村長に申請してその承認を受けなければならない。",
        "category": { "major": "4-1申告制度", "minor": "2.納税管理人の申告", "sub": "2.内容" }
      },
      {
        "id": 95,
        "text": "住宅用地に対する課税標準の特例の適用に際し、住宅用地に該当するか否かの認定を目的として申告義務を課することができるとされている。",
        "category": { "major": "4-1申告制度", "minor": "3.住宅用地の申告", "sub": "1.趣旨" }
      },
      {
        "id": 96,
        "text": "①市町村長は、住宅用地の所有者に、当該市町村の条例で定めるところにより、当該年度に係る賦課期日現在における当該住宅用地について、次の事項を申告させることができる。ただし、当該年度の前年度に係る賦課期日における当該住宅用地に所有者が引き続き当該住宅用地を所有し、かつ、その申告すべき事項に異動がない場合は、この限りでない。ｲ_その所在及び面積。ﾛ_その上に存する家屋の床面積及び用途。ﾊ_その上に存する住居の数。ﾆ_その他固定資産税の賦課徴収に関し必要な事項。",
        "category": { "major": "4-1申告制度", "minor": "3.住宅用地の申告", "sub": "2.内容①" }
      },
      {
        "id": 97,
        "text": "②市町村長は、当該年度に係る賦課期日において住宅用地から住宅用地以外の土地への変更があり、かつ当該土地の所有者が当該年度の前年度に係る賦課期日から引き続き、当該土地を所有している場合には当該土地の所有者に、当該市町村の条例に定めるところにより、その旨を申告させることができる。",
        "category": { "major": "4-1申告制度", "minor": "3.住宅用地の申告", "sub": "2.内容②" }
      },
      {
        "id": 98,
        "text": "登記簿及び補充課税台帳上の所有者が死亡した場合において、新たな納税義務者の適正かつ確実な把握を目的として申告義務を課することができることとされている。",
        "category": { "major": "4-1申告制度", "minor": "4.現所有者の申告", "sub": "1.趣旨" }
      },
      {
        "id": 99,
        "text": "市町村長は、その市町村内の土地又は家屋について、登記簿又は土地補充課税台帳若しくは家屋補充課税台帳に所有者として登記又は登録がされている個人が死亡している場合における当該土地又は家屋を所有している者（以下「現所有者」という。）に、当該市町村の条例で定めるところにより、現所有者であることを知った日の翌日から３月を経過した日以後の日までに、次の事項を申告させることができる。①当該現所有者の住所及び氏名又は名称。②その他固定資産税の賦課徴収に関し必要な事項。",
        "category": { "major": "4-1申告制度", "minor": "4.現所有者の申告", "sub": "2.内容" }
      },
      {
        "id": 100,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 101,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 102,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 103,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 104,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 105,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 106,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 107,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 108,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 109,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 110,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 111,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 112,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 113,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 114,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 115,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 116,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 117,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 118,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 119,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      },
      {
        "id": 120,
        "text": "1",
        "category": { "major": "1", "minor": "1", "sub": "1" }
      }






    ];

    let currentSentenceIndex = 0;
    let isBlanked = false;

    // 大区分、中区分、小区分の初期化
    function initializeSelectors() {
      const majorSelect = document.getElementById("major-select");
      const uniqueMajors = [...new Set(sentences.map(s => s.category.major))];
      majorSelect.innerHTML = uniqueMajors.map(major => `<option value="${major}">${major}</option>`).join("");
      updateMinorSelect();
    }

    function updateMinorSelect() {
      const major = document.getElementById("major-select").value;
      const minorSelect = document.getElementById("minor-select");

      const filteredSentences = sentences.filter(s => s.category.major === major);
      const uniqueMinors = [...new Set(filteredSentences.map(s => s.category.minor))];
      minorSelect.innerHTML = uniqueMinors.map(minor => `<option value="${minor}">${minor}</option>`).join("");
      updateSubSelect();
    }

    function updateSubSelect() {
      const major = document.getElementById("major-select").value;
      const minor = document.getElementById("minor-select").value;
      const subSelect = document.getElementById("sub-select");

      const filteredSentences = sentences.filter(s => s.category.major === major && s.category.minor === minor);
      subSelect.innerHTML = filteredSentences.map(s => `<option value="${s.category.sub}">${s.category.sub}</option>`).join("");
    }

    function showQuestion() {
      const questionText = document.getElementById("question-text");
      const sentence = sentences[currentSentenceIndex];
      questionText.innerHTML = isBlanked ? createBlankedSentence(sentence.text) : sentence.text;
      populateInputArea();
    }

    function createBlankedSentence(text) {
      let blankedIndex = 1;
      return text.replace(/([^。！？、（）]*)([。！？、（）])/g, (match, p1, p2, offset) => {
        if (offset >= 0 && offset < text.length && p1.trim().length > 0 && !/\)$/.test(p1)) {
          return `<span class="blanked" data-original="${p1}">[空欄${blankedIndex++}]</span>${p2}`;
        }
        return match;
      });
    }


    function populateInputArea() {
      const inputArea = document.getElementById("input-area");
      inputArea.innerHTML = '';
      const blanks = document.querySelectorAll(".blanked");
      blanks.forEach((blank, index) => {
        const inputContainer = document.createElement("div");
        inputContainer.classList.add("input-container");
        inputContainer.innerHTML = `
            <label for="input-${index}">空欄${index + 1}:</label>
            <input id="input-${index}" type="text" onkeydown="handleKeyDown(event, ${index})" />

            <button onclick="checkAnswer(${index})">チェック</button>
            <span id="feedback-${index}"></span>
        `;
        inputArea.appendChild(inputContainer);
      });
    }

    function handleKeyDown(event, index) {
      const inputFields = document.querySelectorAll('input[type="text"]');
      if (event.key === "Enter") {
        checkAnswer(index);
      } else if (event.key === "ArrowUp" && index > 0) {
        inputFields[index - 1].focus();
      } else if (event.key === "ArrowDown" && index < inputFields.length - 1) {
        inputFields[index + 1].focus();
      }
    }





    function checkAnswer(index) {
      const inputField = document.getElementById(`input-${index}`);
      const inputText = inputField.value.trim();
      const blank = document.querySelectorAll(".blanked")[index];
      const originalText = blank.getAttribute("data-original").trim();
      const feedback = document.getElementById(`feedback-${index}`);

      if (inputText === originalText) {
        feedback.textContent = "正解です！";
        feedback.classList.add("correct");
        feedback.classList.remove("incorrect");
      } else {
        feedback.textContent = `不正解です。間違い箇所: ${highlightDifferences(originalText, inputText)}`;
        feedback.classList.add("incorrect");
        feedback.classList.remove("correct");
      }
    }

    function highlightDifferences(original, input) {
      let diffIndex = 0;
      while (diffIndex < original.length && diffIndex < input.length && original[diffIndex] === input[diffIndex]) {
        diffIndex++;
      }
      const correctPart = original.slice(0, diffIndex);
      const incorrectPart = original.slice(diffIndex);
      return `${correctPart}${incorrectPart}`;
    }


    document.getElementById("major-select").addEventListener("change", updateMinorSelect);
    document.getElementById("minor-select").addEventListener("change", updateSubSelect);

    document.getElementById("jump-btn").addEventListener("click", () => {
      const major = document.getElementById("major-select").value;
      const minor = document.getElementById("minor-select").value;
      const sub = document.getElementById("sub-select").value;

      const question = sentences.find(
        s => s.category.major === major && s.category.minor === minor && s.category.sub === sub
      );

      if (question) {
        currentSentenceIndex = sentences.indexOf(question);
        isBlanked = false;
        showQuestion();
      }
    });

    document.getElementById("next-btn").addEventListener("click", () => { // 次へボタンのイベントリスナー
      if (currentSentenceIndex < sentences.length - 1) {
        currentSentenceIndex++;
        isBlanked = false;
        showQuestion();
        updateSelectors();
      } else {
        alert("これ以上の問題はありません。");
      }
    });

    document.getElementById("prev-btn").addEventListener("click", () => { // 前へボタンのイベントリスナー
      if (currentSentenceIndex > 0) {
        currentSentenceIndex--;
        isBlanked = false;
        showQuestion();
        updateSelectors();
      } else {
        alert("これ以上戻れません。");
      }
    });

    function updateSelectors() { // 区分セレクタの更新
      const sentence = sentences[currentSentenceIndex];
      document.getElementById("major-select").value = sentence.category.major;
      updateMinorSelect();
      document.getElementById("minor-select").value = sentence.category.minor;
      updateSubSelect();
      document.getElementById("sub-select").value = sentence.category.sub;
    }



    document.getElementById("toggle-blank-btn").addEventListener("click", () => {
      isBlanked = !isBlanked;
      showQuestion();
    });

    document.getElementById("question-text").addEventListener("click", (e) => {
      if (e.target.classList.contains("blanked")) {
        const isBlanked = e.target.getAttribute("data-blanked") === "true";
        const blankNumber = e.target.getAttribute("data-blank-number");
        const originalText = e.target.getAttribute("data-original");

        if (isBlanked) {
          e.target.innerHTML = originalText;
          e.target.setAttribute("data-blanked", "false");
        } else {
          const textLength = originalText.length;
          e.target.innerHTML = `[${textLength}文字]`;
          e.target.setAttribute("data-blanked", "true");
        }
      }
    });

    // 初期化
    initializeSelectors();
    showQuestion();
  </script>
</body>

</html>
